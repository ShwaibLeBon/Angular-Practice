import { Component, OnInit, EventEmitter, Output } from '@angular/core';
import { InvoicesService } from 'src/app/core';
import { MatDialog, MatDialogConfig } from '@angular/material/dialog';
import { SplitInvoiceDialogComponent } from '../split-invoice-dialog/split-invoice-dialog.component';

@Component({
  selector: 'app-invoices-list',
  templateUrl: './invoices-list.component.html',
  styleUrls: ['./invoices-list.component.scss'],
})
export class InvoicesListComponent {
  invoices = [
    {
      id: 1,
      number: 15,
      customerName: 'Niyungeko Carmel',
      total: 3,
      createdAt: '2023-05-12T12:51:29.805Z',
      updatedAt: '2023-05-12T12:51:29.805Z',
    },
    {
      id: 2,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-12T12:51:29.805Z',
      updatedAt: '2023-05-12T12:51:29.805Z',
    },
    {
      id: 10,
      number: 12,
      customerName: 'Niyungeko Carmel',
      total: 200,
      createdAt: '2023-05-12T14:01:15.173Z',
      updatedAt: '2023-05-12T14:01:15.173Z',
    },
    {
      id: 12,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:00:06.961Z',
      updatedAt: '2023-05-13T13:00:06.961Z',
    },
    {
      id: 13,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:01:23.569Z',
      updatedAt: '2023-05-13T13:01:23.569Z',
    },
    {
      id: 14,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:01:23.574Z',
      updatedAt: '2023-05-13T13:01:23.574Z',
    },
    {
      id: 15,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:01:23.576Z',
      updatedAt: '2023-05-13T13:01:23.576Z',
    },
    {
      id: 16,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:02:27.930Z',
      updatedAt: '2023-05-13T13:02:27.930Z',
    },
    {
      id: 17,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:02:27.936Z',
      updatedAt: '2023-05-13T13:02:27.936Z',
    },
    {
      id: 18,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:02:27.937Z',
      updatedAt: '2023-05-13T13:02:27.937Z',
    },
    {
      id: 19,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:03:36.136Z',
      updatedAt: '2023-05-13T13:03:36.136Z',
    },
    {
      id: 20,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:03:36.140Z',
      updatedAt: '2023-05-13T13:03:36.140Z',
    },
    {
      id: 21,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:03:36.146Z',
      updatedAt: '2023-05-13T13:03:36.146Z',
    },
    {
      id: 22,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:05:37.656Z',
      updatedAt: '2023-05-13T13:05:37.656Z',
    },
    {
      id: 23,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:05:37.660Z',
      updatedAt: '2023-05-13T13:05:37.660Z',
    },
    {
      id: 24,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:06:57.285Z',
      updatedAt: '2023-05-13T13:06:57.285Z',
    },
    {
      id: 25,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:06:57.289Z',
      updatedAt: '2023-05-13T13:06:57.289Z',
    },
    {
      id: 26,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:06:57.291Z',
      updatedAt: '2023-05-13T13:06:57.291Z',
    },
    {
      id: 27,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:07:09.047Z',
      updatedAt: '2023-05-13T13:07:09.047Z',
    },
    {
      id: 28,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:07:09.051Z',
      updatedAt: '2023-05-13T13:07:09.051Z',
    },
    {
      id: 29,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:07:09.053Z',
      updatedAt: '2023-05-13T13:07:09.053Z',
    },
    {
      id: 30,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:07:50.689Z',
      updatedAt: '2023-05-13T13:07:50.689Z',
    },
    {
      id: 31,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:07:50.694Z',
      updatedAt: '2023-05-13T13:07:50.694Z',
    },
    {
      id: 32,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:07:50.701Z',
      updatedAt: '2023-05-13T13:07:50.701Z',
    },
    {
      id: 33,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:10:27.274Z',
      updatedAt: '2023-05-13T13:10:27.274Z',
    },
    {
      id: 34,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:10:27.278Z',
      updatedAt: '2023-05-13T13:10:27.278Z',
    },
    {
      id: 35,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:10:27.284Z',
      updatedAt: '2023-05-13T13:10:27.284Z',
    },
    {
      id: 36,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:30:41.021Z',
      updatedAt: '2023-05-13T13:30:41.021Z',
    },
    {
      id: 37,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:30:41.023Z',
      updatedAt: '2023-05-13T13:30:41.023Z',
    },
    {
      id: 38,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:30:41.027Z',
      updatedAt: '2023-05-13T13:30:41.027Z',
    },
    {
      id: 39,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:31:14.430Z',
      updatedAt: '2023-05-13T13:31:14.430Z',
    },
    {
      id: 40,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:31:14.433Z',
      updatedAt: '2023-05-13T13:31:14.433Z',
    },
    {
      id: 41,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:31:14.437Z',
      updatedAt: '2023-05-13T13:31:14.437Z',
    },
    {
      id: 42,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:32:09.899Z',
      updatedAt: '2023-05-13T13:32:09.899Z',
    },
    {
      id: 43,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:32:09.901Z',
      updatedAt: '2023-05-13T13:32:09.901Z',
    },
    {
      id: 44,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:32:09.905Z',
      updatedAt: '2023-05-13T13:32:09.905Z',
    },
    {
      id: 45,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:33:07.601Z',
      updatedAt: '2023-05-13T13:33:07.601Z',
    },
    {
      id: 46,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:33:07.604Z',
      updatedAt: '2023-05-13T13:33:07.604Z',
    },
    {
      id: 47,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:33:07.608Z',
      updatedAt: '2023-05-13T13:33:07.608Z',
    },
    {
      id: 48,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:34:39.796Z',
      updatedAt: '2023-05-13T13:34:39.796Z',
    },
    {
      id: 49,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:34:39.797Z',
      updatedAt: '2023-05-13T13:34:39.797Z',
    },
    {
      id: 50,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:34:39.801Z',
      updatedAt: '2023-05-13T13:34:39.801Z',
    },
    {
      id: 51,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:35:24.680Z',
      updatedAt: '2023-05-13T13:35:24.680Z',
    },
    {
      id: 52,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:35:24.681Z',
      updatedAt: '2023-05-13T13:35:24.681Z',
    },
    {
      id: 53,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:35:24.685Z',
      updatedAt: '2023-05-13T13:35:24.685Z',
    },
    {
      id: 54,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:36:36.059Z',
      updatedAt: '2023-05-13T13:36:36.059Z',
    },
    {
      id: 55,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:36:36.062Z',
      updatedAt: '2023-05-13T13:36:36.062Z',
    },
    {
      id: 56,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:36:36.065Z',
      updatedAt: '2023-05-13T13:36:36.065Z',
    },
    {
      id: 57,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:36:50.607Z',
      updatedAt: '2023-05-13T13:36:50.607Z',
    },
    {
      id: 58,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:36:50.608Z',
      updatedAt: '2023-05-13T13:36:50.608Z',
    },
    {
      id: 59,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:36:50.609Z',
      updatedAt: '2023-05-13T13:36:50.609Z',
    },
    {
      id: 60,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:37:06.298Z',
      updatedAt: '2023-05-13T13:37:06.298Z',
    },
    {
      id: 61,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:37:06.300Z',
      updatedAt: '2023-05-13T13:37:06.300Z',
    },
    {
      id: 62,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:37:06.303Z',
      updatedAt: '2023-05-13T13:37:06.303Z',
    },
    {
      id: 63,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:37:45.723Z',
      updatedAt: '2023-05-13T13:37:45.723Z',
    },
    {
      id: 64,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:37:45.725Z',
      updatedAt: '2023-05-13T13:37:45.725Z',
    },
    {
      id: 65,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:37:45.728Z',
      updatedAt: '2023-05-13T13:37:45.728Z',
    },
    {
      id: 66,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:40:47.681Z',
      updatedAt: '2023-05-13T13:40:47.681Z',
    },
    {
      id: 67,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:40:47.685Z',
      updatedAt: '2023-05-13T13:40:47.685Z',
    },
    {
      id: 68,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:40:47.692Z',
      updatedAt: '2023-05-13T13:40:47.692Z',
    },
    {
      id: 69,
      number: 13,
      customerName: 'Kimana Loop',
      total: 13000,
      createdAt: '2023-05-13T13:42:44.774Z',
      updatedAt: '2023-05-13T13:42:44.774Z',
    },
    {
      id: 70,
      number: 14,
      customerName: 'Muyenzi Boucle',
      total: 4000,
      createdAt: '2023-05-13T13:42:44.779Z',
      updatedAt: '2023-05-13T13:42:44.779Z',
    },
    {
      id: 71,
      number: 15,
      customerName: 'Kaburo Zunguruka',
      total: 5410,
      createdAt: '2023-05-13T13:42:44.785Z',
      updatedAt: '2023-05-13T13:42:44.785Z',
    },
    {
      id: 75,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-14T21:33:13.416Z',
      updatedAt: '2023-05-14T21:33:13.416Z',
    },
    {
      id: 76,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-14T21:35:09.077Z',
      updatedAt: '2023-05-14T21:35:09.077Z',
    },
    {
      id: 77,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-14T21:35:56.100Z',
      updatedAt: '2023-05-14T21:35:56.100Z',
    },
    {
      id: 78,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-14T21:36:56.455Z',
      updatedAt: '2023-05-14T21:36:56.455Z',
    },
    {
      id: 79,
      number: 16,
      customerName: 'Ngendakumana Hermes',
      total: 4,
      createdAt: '2023-05-14T21:37:28.399Z',
      updatedAt: '2023-05-14T21:37:28.399Z',
    },
    {
      id: 80,
      number: 2023040021,
      customerName: 'Shwaib LeBon',
      total: 22500000,
      createdAt: '2023-05-15T07:29:53.788Z',
      updatedAt: '2023-05-15T07:29:53.788Z',
    },
    {
      id: 81,
      number: 2023040021,
      customerName: 'Shwaib LeBon',
      total: 546000,
      createdAt: '2023-05-15T08:16:15.309Z',
      updatedAt: '2023-05-15T08:16:15.309Z',
    },
    {
      id: 82,
      number: 2023040021,
      customerName: 'Shwaib LeBon',
      total: 7300000,
      createdAt: '2023-05-15T08:27:37.551Z',
      updatedAt: '2023-05-15T08:27:37.551Z',
    },
    {
      id: 83,
      number: 2023040021,
      customerName: 'Shwaib LeBon',
      total: 728000,
      createdAt: '2023-05-15T08:39:35.896Z',
      updatedAt: '2023-05-15T08:39:35.896Z',
    },
  ];

  constructor(
    private invoiceService: InvoicesService,
    private dialog: MatDialog
  ) {}

  // ngOnInit(): void {
  //   this.invoiceService.getInvoices().subscribe((invoice: any) => {
  //     this.invoices = invoice;
  //     console.log("items fetched", this.invoices)
  //   });
  // }

  @Output() selectedItem = new EventEmitter();

  selectItem(item: any) {
    this.selectedItem.emit(item);
  }

  viewDetail(item: any) {
    this.selectedItem.emit(item);
  }

  openDialog(data: any) {
    this.dialog.open(SplitInvoiceDialogComponent, {
      data: data,
    });
  }

  useFormattedMoney = (x: any) => {
    if (!x) return 0;
    x = parseFloat(x).toFixed(0);
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
  };
}
